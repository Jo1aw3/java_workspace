package pizzeria_v04;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;

public class Conexion {

	ArrayList<Pizza> pizzaList = new ArrayList<Pizza>();
	ArrayList<Usuario> usuarioList = new ArrayList<Usuario>();
	ArrayList<Pedido> pedidoList = new ArrayList<Pedido>();
	
	public static Connection obtenerConexion() throws SQLException {
		String url = "jdbc:mysql://localhost/pizzeria";
		String usuario = "root";
		String contraseña = "";
		return DriverManager.getConnection(url, usuario, contraseña);
	}
	
	public static void cargarDatos() {
		
		
		Statement sentencia;
		ResultSet resultado;
		
		Statement conexion = obtenerConexion();
		sentencia = conexion.createStatement();
		resultado = sentencia.executeQuery("SELECT * FROM pizza");
		while (resultado.next()) {
			pizzaList.add(new Pizza(resultado.getInt("id"), resultado.getString("nombre"), resultado.getString("ingredientes"), resultado.getDouble("precio")));
		}
		resultado = sentencia.executeQuery("SELECT * FROM usuario");
		while (resultado.next()) {
			usuarioList.add(new Usuario(resultado.getInt("id"), resultado.getString("nombre"), resultado.getString("apellido")));
		}
		resultado = sentencia.executeQuery("SELECT * FROM pedido");
		while (resultado.next()) {
			pedidoList.add(new Pedido(resultado.getInt("idpizza"), resultado.getInt("idusuario"), resultado.getInt("idpedido"), resultado.getInt("cantidad")));
		}
		
	}
	
}
