package pizzeria_v04;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.Scanner;

public class MainPizza {

	public static void main(String[] args) {

		Scanner tec = new Scanner(System.in);
		
		// genero un arrayList para cada clase
		ArrayList<Pizza> pizzaList = new ArrayList<Pizza>();
		ArrayList<Usuario> usuarioList = new ArrayList<Usuario>();
		ArrayList<Pedido> pedidoList = new ArrayList<Pedido>();
		
		// genero variables para la manipulacion de la BD
		Statement sentencia;
		ResultSet resultado;
		
		try {
			// conexion con la BD
			String url = "jdbc:mysql://localhost/pizzeria";
			String user = "root";
			String pass = "";
			Connection conexion = DriverManager.getConnection(url, user, pass);
			
			// guardo en cada arraylist los datos de la BD desde su respectiva tabla
			sentencia = conexion.createStatement();
			resultado = sentencia.executeQuery("SELECT * FROM pizza");
			while (resultado.next()) {
				pizzaList.add(new Pizza(resultado.getInt("id"), resultado.getString("nombre"), resultado.getString("ingredientes"), resultado.getDouble("precio")));
			}
			resultado = sentencia.executeQuery("SELECT * FROM usuario");
			while (resultado.next()) {
				usuarioList.add(new Usuario(resultado.getInt("id"), resultado.getString("nombre"), resultado.getString("apellido")));
			}
			resultado = sentencia.executeQuery("SELECT * FROM pedido");
			while (resultado.next()) {
				usuarioList.add(new Pedido(resultado.getInt("idpizza"), resultado.getInt("idusuario"), resultado.getInt("idpedido"), resultado.getInt("cantidad")));
			}
			
		} catch (SQLException e) {
			e.printStackTrace();
			System.out.println("error de conexion");
		}
		
	}

}
